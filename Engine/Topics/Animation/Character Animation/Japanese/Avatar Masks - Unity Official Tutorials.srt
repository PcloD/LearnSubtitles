1
00:00:00,456 --> 00:00:02,894
アバターにアニメーションを付けている時

2
00:00:02,894 --> 00:00:04,894
アニメーションに影響を受ける体の一部を

3
00:00:04,894 --> 00:00:06,894
分離したいケースというのが生じることがあります

4
00:00:07,767 --> 00:00:10,735
具体的には 手を振るアニメーションがある場合に

5
00:00:10,735 --> 00:00:13,191
それを 走行中・歩行中・ジャンプ中などにも

6
00:00:13,191 --> 00:00:15,191
再生したい場合などがそれです

7
00:00:15,953 --> 00:00:17,773
これを実現するのに使われるのが

8
00:00:17,773 --> 00:00:19,773
アバターマスクです

9
00:00:20,176 --> 00:00:22,425
アバターマスクを使うと たとえばこの例であれば

10
00:00:22,425 --> 00:00:24,425
アニメーションの影響範囲をアバターの腕のだけに

11
00:00:24,425 --> 00:00:26,425
制限することができます

12
00:00:28,057 --> 00:00:30,475
アバターマスクは 2 つの異なる方法で作成・使用

13
00:00:30,475 --> 00:00:32,907
することができますが 全体としての機能は

14
00:00:32,907 --> 00:00:34,907
どちらの場合でも同一です

15
00:00:36,153 --> 00:00:38,153
まずアバターマスクはアニメーションごとに

16
00:00:38,153 --> 00:00:39,946
作成することができます

17
00:00:40,460 --> 00:00:43,111
この方法を取る場合はまず

18
00:00:43,111 --> 00:00:45,292
Project パネルでモデルを選択した状態で

19
00:00:45,292 --> 00:00:47,126
Animations タブをクリックして Model Importer の 

20
00:00:47,126 --> 00:00:49,126
Animations タブを開きます

21
00:00:49,971 --> 00:00:51,971
アニメーションクリップを選択すると

22
00:00:51,971 --> 00:00:53,529
クリップ名の下に複数のプロパティが

23
00:00:53,529 --> 00:00:55,085
表示されます

24
00:00:55,085 --> 00:00:57,937
そのひとつが Mask ドロップダウンです

25
00:00:58,768 --> 00:01:00,962
ここでは編集中の特定のアニメーションに

26
00:01:00,962 --> 00:01:03,625
固有のマスクを作成できます

27
00:01:04,843 --> 00:01:06,954
アバターマスクを作るもう一つの方法は

28
00:01:06,954 --> 00:01:09,771
Project パネルでアセットとして作成する方法です

29
00:01:09,771 --> 00:01:14,009
この場合は Project パネルを右クリックして Create > Avatar Mask を選びます

30
00:01:15,476 --> 00:01:17,742
作成後は Animator ウィンドウで

31
00:01:17,742 --> 00:01:19,742
アニメーションコントローラーのレイヤーに

32
00:01:19,742 --> 00:01:21,505
適用することができます

33
00:01:22,062 --> 00:01:24,686
マスクの作成と適用はそのアニメーターレイヤーの

34
00:01:24,686 --> 00:01:27,994
全アニメーションに影響を及ぼします

35
00:01:29,392 --> 00:01:31,600
アニメーターレイヤーの詳細については

36
00:01:31,600 --> 00:01:33,600
下記リンク先にあるレッスンをご覧ください

37
00:01:34,984 --> 00:01:37,386
さてアバターマスクには 2 つの項目

38
00:01:37,386 --> 00:01:39,386
Humanoid と Transform があります

39
00:01:40,646 --> 00:01:42,646
Humanoid ドロップダウンにはこちらを向いている

40
00:01:42,646 --> 00:01:45,381
ヒューマノイドの図が表示されます

41
00:01:45,922 --> 00:01:48,299
なので この図で左側にある手は実際には

42
00:01:48,299 --> 00:01:50,299
右手を意味します

43
00:01:51,075 --> 00:01:53,423
ここで体の部位をクリックすると色が赤と緑の間で

44
00:01:53,423 --> 00:01:55,423
切り替わります

45
00:01:56,033 --> 00:01:58,200
また図の外側をクリックすると図全体を

46
00:01:58,200 --> 00:02:00,960
赤と緑の間で切り替えられます

47
00:02:02,219 --> 00:02:04,219
この色はヒューマノイドアバターのパーツのどれが

48
00:02:04,219 --> 00:02:07,143
このマスクでアニメーション付けされるかを示します

49
00:02:08,016 --> 00:02:10,640
緑色は対象の身体部位が使われる事を示し

50
00:02:10,640 --> 00:02:13,068
赤色は使われないことを示します

51
00:02:13,927 --> 00:02:16,548
今回の手を振るアニメーションの場合は右腕を除く全身を

52
00:02:16,548 --> 00:02:18,548
選択解除した状態にします

53
00:02:18,548 --> 00:02:20,178
これでアニメーションは右腕にのみ

54
00:02:20,178 --> 00:02:22,178
適用されるようになります

55
00:02:23,742 --> 00:02:27,013
アバターマスクのもう一つの項目は Transform マスクです

56
00:02:27,013 --> 00:02:29,623
Transform マスクは通常  リグ付きのモデルや

57
00:02:29,623 --> 00:02:32,150
ヒューマノイドのリグ付きモデルのうち

58
00:02:32,150 --> 00:02:34,150
外部骨があるものに使います

59
00:02:34,150 --> 00:02:37,290
たとえば 4 本足のロボットや

60
00:02:37,290 --> 00:02:39,290
羽付きヒューマノイドなどがこれに当たります

61
00:02:40,025 --> 00:02:42,177
ここではマスクのベースとするアバターを

62
00:02:42,177 --> 00:02:43,899
選択する必要があります

63
00:02:44,497 --> 00:02:47,505
選択は丸い選択ボタンで行います

64
00:02:50,312 --> 00:02:52,242
アバターが選択されてインポートされると

65
00:02:52,242 --> 00:02:55,224
アバターの全 Transform の

66
00:02:55,224 --> 00:02:57,224
リストが表示されます

67
00:02:57,224 --> 00:03:00,034
ここでアニメーションが影響を及ぼす/及ぼさない

68
00:03:00,034 --> 00:03:01,673
Transform を選択することが

69
00:03:01,673 --> 00:03:03,477
できます

70
00:03:03,477 --> 00:03:05,477
ここで Transform を選択すると

71
00:03:05,477 --> 00:03:08,594
マスクの一部となりアニメーションによって動くようになります

72
00:03:09,094 --> 00:03:11,204
たとえば尻尾を持つヒューマノイドアバター 

73
00:03:11,204 --> 00:03:13,204
がいる場合を想像してみてください

74
00:03:13,594 --> 00:03:16,144
キャラクターの Locomotion は Animator の

75
00:03:16,144 --> 00:03:18,655
ステートマシンのベースレイヤーで制御されています

76
00:03:19,100 --> 00:03:21,849
その他のアニメーション（たとえば攻撃など）は

77
00:03:21,849 --> 00:03:23,849
それ以降のレイヤーで制御されます

78
00:03:24,625 --> 00:03:26,625
こういう状態であればベース以降のレイヤーに

79
00:03:26,625 --> 00:03:28,751
Transform マスクを持たせて尻尾のボーンの

80
00:03:28,751 --> 00:03:30,751
チェックを外しておくのも良いでしょう

81
00:03:31,748 --> 00:03:33,914
こうすることで尻尾が他のレイヤーのアニメーションに

82
00:03:33,914 --> 00:03:35,914
影響を受けないようにした上で

83
00:03:35,914 --> 00:03:38,496
ベースレイヤーで再生されているアニメーションによって

84
00:03:38,496 --> 00:03:40,496
動きが付けられるようになるわけです

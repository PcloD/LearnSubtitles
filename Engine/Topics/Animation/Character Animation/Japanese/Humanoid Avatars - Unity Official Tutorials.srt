1
00:00:00,414 --> 00:00:03,165
Unity でのアバターとはモデルの Transform を

2
00:00:03,165 --> 00:00:05,165
どうアニメーションさせるかをアニメーションシステムに

3
00:00:05,165 --> 00:00:06,832
伝える定義として機能します

4
00:00:07,485 --> 00:00:10,380
ヒューマノイドモデルの場合 これらはユーザーの仕様に

5
00:00:10,380 --> 00:00:12,380
合わせて構成できます

6
00:00:13,446 --> 00:00:15,653
Project パネルでメッシュを選択すると

7
00:00:15,653 --> 00:00:17,807
インスペクターには次の 3 つのタブ

8
00:00:17,807 --> 00:00:20,499
Model / Rig / Animations が表示されます

9
00:00:21,039 --> 00:00:24,287
アバターの構成を行うには Rig タブをクリックします

10
00:00:25,685 --> 00:00:27,685
このチュートリアルではヒューマノイドのモデルを

11
00:00:27,685 --> 00:00:30,114
扱うものとしますから

12
00:00:30,114 --> 00:00:32,809
Animation Type は Humanoid を選びます

13
00:00:33,443 --> 00:00:37,025
その下にあるのは Avatar Definition プロパティです

14
00:00:37,525 --> 00:00:40,110
オプションとして Create From This Model と

15
00:00:40,110 --> 00:00:42,110
Copy From Other Avatar があります

16
00:00:42,955 --> 00:00:45,095
Copy From Other Avatar はアバターの定義を

17
00:00:45,095 --> 00:00:47,095
既に構成済みのアバターからコピーする

18
00:00:47,095 --> 00:00:48,789
場合に使用します

19
00:00:49,415 --> 00:00:51,832
多くの場合 Unity はモデルを 

20
00:00:51,832 --> 00:00:54,067
自動的に構成します  この機能が使える場合は

21
00:00:54,067 --> 00:00:56,411
Configure ボタンの隣にチェックマークが

22
00:00:56,411 --> 00:00:58,411
表示されます

23
00:00:58,411 --> 00:01:01,461
表示されない場合は手動で構成を行います

24
00:01:02,555 --> 00:01:04,345
手動でアバターを構成する方法については

25
00:01:04,345 --> 00:01:07,025
後ほど解説するので ひとまずここでは

26
00:01:07,025 --> 00:01:09,343
Rig タブの説明を終えてしまいましょう

27
00:01:09,343 --> 00:01:13,230
では Optimise Game Objects チェックボックスについて

28
00:01:14,462 --> 00:01:18,007
デフォルトでは Unity はモデルのリギングを最適化しません

29
00:01:18,397 --> 00:01:20,593
これはつまり Unity はモデルのボーンとジョイントを

30
00:01:20,593 --> 00:01:22,593
表すために空のゲームオブジェクトを多数

31
00:01:22,593 --> 00:01:24,593
作成することを意味します

32
00:01:25,231 --> 00:01:27,231
こうすることでモデルのパーツの全 Transform にアクセス

33
00:01:27,231 --> 00:01:30,664
できるようになりますがこれは非効率的でもあります

34
00:01:30,664 --> 00:01:32,773
通常のケースではそこまで制御しなくても

35
00:01:32,773 --> 00:01:34,137
問題ないためです

36
00:01:34,844 --> 00:01:37,957
なので通常はこの Optimise Game Objects を

37
00:01:37,957 --> 00:01:39,957
オンにすることを推奨します

38
00:01:40,664 --> 00:01:43,709
これをオンにすると Unity は

39
00:01:43,709 --> 00:01:45,961
空のゲームオブジェクトを作成しなくなります

40
00:01:45,961 --> 00:01:49,136
そしてすべての Transform を管理しなくて良いので

41
00:01:49,136 --> 00:01:51,385
ゲームのパフォーマンスも向上します

42
00:01:52,133 --> 00:01:54,820
ただ 一部の状況ではモデルの特定の

43
00:01:54,820 --> 00:01:56,485
身体部位をコードや階層内で

44
00:01:56,485 --> 00:01:59,362
参照したい場合というのもありえます

45
00:02:00,111 --> 00:02:02,819
たとえばモデルの手にコーヒーカップを持たせたい

46
00:02:02,819 --> 00:02:04,819
場合などがこれにあたります

47
00:02:05,250 --> 00:02:08,129
これはもちろん最適化されたモデルでも実現可能です

48
00:02:08,129 --> 00:02:10,623
これは目的の Transform を公開することで行います

49
00:02:11,720 --> 00:02:15,195
Transform を公開するには Extra Transforms To Expose

50
00:02:15,195 --> 00:02:18,176
ボックスの下にある + ボタンをクリックして

51
00:02:18,176 --> 00:02:20,001
目的の Transform を探し

52
00:02:20,001 --> 00:02:21,767
指定します

53
00:02:21,767 --> 00:02:23,767
この例ではモデルの右手を

54
00:02:23,767 --> 00:02:25,767
探していきます

55
00:02:29,886 --> 00:02:32,578
モデルの最適化を変更した場合

56
00:02:32,578 --> 00:02:34,467
その後にアバターの定義を再構成する

57
00:02:34,467 --> 00:02:36,398
必要が生じます

58
00:02:36,398 --> 00:02:39,266
再構成する場合は Configure ボタンをクリックします

59
00:02:39,766 --> 00:02:41,766
次にモデルに対して行った未適用のインポート設定を

60
00:02:41,766 --> 00:02:43,766
残すかどうかを確認されるので Apply を選択して

61
00:02:43,766 --> 00:02:47,212
設定を保存します

62
00:02:48,057 --> 00:02:50,620
なおアバターの構成は別のシーンで行われるため

63
00:02:50,620 --> 00:02:53,006
シーンに未保存の変更内容がある場合は Unity から

64
00:02:53,006 --> 00:02:56,585
変更内容を保存するかどうかが確認されます

65
00:02:58,162 --> 00:03:00,453
構成用のシーンはモデル以外には

66
00:03:00,453 --> 00:03:02,635
何もない状態です  この時モデルの全階層は

67
00:03:02,635 --> 00:03:04,635
公開された状態になっています

68
00:03:05,135 --> 00:03:09,312
インスペクター側には Mapping と Muscles の 2 個のタブが表示されます

69
00:03:09,312 --> 00:03:11,312
まずは Mapping を見ていきましょう

70
00:03:12,364 --> 00:03:14,364
ここではヒューマノイドのレイアウトに対する

71
00:03:14,364 --> 00:03:16,685
Unity の定義に合わせてモデルのインポートされた

72
00:03:16,685 --> 00:03:18,685
階層のマッピングが表示されます

73
00:03:19,517 --> 00:03:22,303
その直下にはさまざまな丸や点のついた

74
00:03:22,303 --> 00:03:24,149
ヒューマノイドモデルの図が

75
00:03:24,149 --> 00:03:25,504
表示されます

76
00:03:26,552 --> 00:03:28,691
この点や丸はモデルのボーンを示すものです

77
00:03:29,190 --> 00:03:31,273
点線の丸で囲まれた点は

78
00:03:31,273 --> 00:03:33,384
定義上は任意指定であり必須ではない

79
00:03:33,384 --> 00:03:34,890
ことを示します

80
00:03:35,566 --> 00:03:37,706
この図ではモデルのどの部位にフォーカスするかを

81
00:03:37,706 --> 00:03:39,651
選択することができます

82
00:03:39,651 --> 00:03:42,394
必要に応じて左下にある Body / Head /

83
00:03:42,394 --> 00:03:45,286
Left hand / Right Hand のボタンをクリックしてください

84
00:03:46,400 --> 00:03:49,260
図の下に表示されているのは 部位ごとに

85
00:03:49,260 --> 00:03:51,667
分類されたボーンとそれに適用された

86
00:03:51,667 --> 00:03:53,667
Transform のリストです

87
00:03:54,540 --> 00:03:57,036
ボーンに Transform を適用するには

88
00:03:57,036 --> 00:03:59,036
Transform を階層からドラッグして

89
00:03:59,036 --> 00:04:01,702
図の点にドロップするか

90
00:04:01,702 --> 00:04:04,451
図の下にあるプロパティにドロップするか

91
00:04:04,451 --> 00:04:06,922
あるいは選択用の丸ボタンを使用するかします

92
00:04:07,973 --> 00:04:10,946
ボーンのリストの下には 2 つのドロップダウンメニュー

93
00:04:10,946 --> 00:04:12,946
Mapping と Pose があります

94
00:04:13,487 --> 00:04:15,487
Mapping には次の 4 個のオプション

95
00:04:15,487 --> 00:04:19,186
Clear / Automap / Load / Save があります

96
00:04:20,251 --> 00:04:23,331
Clear は全ボーンの割り当てを消去し

97
00:04:24,124 --> 00:04:26,880
Automap は Unity に Transform と

98
00:04:26,880 --> 00:04:29,021
ボーンの自動マッチングを試行させます

99
00:04:29,456 --> 00:04:31,456
アバターの構成を行う場合

100
00:04:31,456 --> 00:04:34,019
通常はこのオプションを使います

101
00:04:35,105 --> 00:04:37,105
Load / Save は複数のアバター間で

102
00:04:37,105 --> 00:04:39,105
構成を共有するヒューマノイドテンプレートを

103
00:04:39,105 --> 00:04:41,748
扱うオプションです

104
00:04:42,463 --> 00:04:44,310
通常は Unity の Automap だけで

105
00:04:44,310 --> 00:04:46,310
事足りるのでこれらオプションを使う

106
00:04:46,310 --> 00:04:47,721
必要はあまりありません

107
00:04:48,376 --> 00:04:50,691
もう一方の Pose ドロップダウンには 3 個のオプション

108
00:04:50,691 --> 00:04:55,383
Reset / Sample Bind Pose / Enforce T-Pose があります

109
00:04:56,013 --> 00:04:58,686
Reset はアバターから一切のポーズを消去して

110
00:04:58,686 --> 00:05:00,686
デフォルトにセットします

111
00:05:01,273 --> 00:05:04,428
Sample Bind Pose はモデルされたポーズを

112
00:05:04,428 --> 00:05:06,428
取るようにアバターをセットするよう試行します

113
00:05:07,156 --> 00:05:09,751
Enforce T-Pose はアバターに

114
00:05:09,751 --> 00:05:11,413
T ポーズを取らせます

115
00:05:11,969 --> 00:05:13,664
これは Unity が推奨する

116
00:05:13,664 --> 00:05:15,502
アバターの扱い方です

117
00:05:15,502 --> 00:05:17,502
マッピングが完了したら

118
00:05:17,502 --> 00:05:20,218
アバターは T ポーズを取らせておきましょう

119
00:05:21,196 --> 00:05:24,025
アバターのボーンをマッピングし終えたら

120
00:05:24,025 --> 00:05:26,122
Apply をクリックして変更を適用します

121
00:05:26,122 --> 00:05:27,774
次に Muscles タブをクリックして

122
00:05:27,774 --> 00:05:29,774
モデルのマッスルを扱っていきます

123
00:05:30,415 --> 00:05:33,059
ここで未適用のインポート設定がある場合は

124
00:05:33,059 --> 00:05:35,451
適用するかどうかの確認が表示されます

125
00:05:37,611 --> 00:05:40,638
Muscles タブには 3 個の設定グループがあります

126
00:05:41,138 --> 00:05:43,138
最初のグループはプレビュー用で

127
00:05:43,138 --> 00:05:45,842
アバターの可動範囲をプレビューできます

128
00:05:46,440 --> 00:05:48,015
なおマッスル範囲を調整する予定の場合は

129
00:05:48,015 --> 00:05:51,007
あらかじめ Reset All ボタンをクリックして

130
00:05:51,007 --> 00:05:52,888
デフォルトの状態に戻しておくことを

131
00:05:52,888 --> 00:05:54,888
お勧めします

132
00:05:55,725 --> 00:05:57,725
2 個めの設定グループは

133
00:05:57,725 --> 00:05:59,725
Per-Muscle 設定です

134
00:06:00,279 --> 00:06:02,084
ここでは体が部位ごとにグループ化されていて

135
00:06:02,084 --> 00:06:04,279
それぞれにスライダーが用意されています

136
00:06:04,279 --> 00:06:05,942
このスライダーはマッスルの動作を調整

137
00:06:05,942 --> 00:06:07,304
する際に使用します

138
00:06:07,933 --> 00:06:12,806
許容数値は -180～180 で

139
00:06:12,806 --> 00:06:14,438
この数値は軸に沿った

140
00:06:14,438 --> 00:06:16,438
可動角度を示します

141
00:06:18,024 --> 00:06:20,918
3 個めの設定グループはAdditional Settings です

142
00:06:21,494 --> 00:06:23,440
ここにある Twist 設定はツイストが近くにある

143
00:06:23,440 --> 00:06:25,440
ジョイントにどの程度影響を与えるかを設定します

144
00:06:26,059 --> 00:06:28,591
Stretch 設定はアバターが別のモデルに

145
00:06:28,591 --> 00:06:31,333
リターゲットされた際にボーンがどの程度

146
00:06:31,333 --> 00:06:32,714
ストレッチするかを設定するものです

147
00:06:33,409 --> 00:06:35,572
最後のオプション Feet Spacing は

148
00:06:35,572 --> 00:06:37,823
両足の距離のデフォルト値を設定します

149
00:06:38,354 --> 00:06:40,473
この設定は「歩き」アニメーションなどに

150
00:06:40,473 --> 00:06:42,473
影響を及ぼさせることができます

151
00:06:43,570 --> 00:06:45,972
各種マッスルの設定が完了したら

152
00:06:45,972 --> 00:06:48,416
Done をクリックして変更内容を適用し

153
00:06:48,416 --> 00:06:50,416
シーンに戻ることができます

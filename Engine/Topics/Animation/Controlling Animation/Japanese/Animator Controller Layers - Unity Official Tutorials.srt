1
00:00:00,470 --> 00:00:02,129
アニメーターコントローラーのステートマシンは複数の

2
00:00:02,129 --> 00:00:04,129
レイヤーに分割することができます

3
00:00:05,251 --> 00:00:07,251
通常レイヤー分けするのは

4
00:00:07,251 --> 00:00:08,973
体の部位ごとにアニメーション付けするためです

5
00:00:09,627 --> 00:00:12,243
たとえばベースクラスではキャラクターの

6
00:00:12,243 --> 00:00:14,714
移動全般を扱うようにしている状態で

7
00:00:14,714 --> 00:00:17,170
キャラクターに手を振らせたいとしましょう

8
00:00:17,628 --> 00:00:19,628
こういう時独立した「手を振る」アニメーションを

9
00:00:19,628 --> 00:00:21,628
別のレイヤーに配置することでキャラクターの「移動」と

10
00:00:21,628 --> 00:00:24,443
「手を振る」アニメーションを同時に再生できるのです

11
00:00:25,620 --> 00:00:27,812
デフォルトではアニメーターコントローラーには

12
00:00:27,812 --> 00:00:30,253
Base Layer というレイヤー 1 つしかありません

13
00:00:30,782 --> 00:00:32,782
このレイヤーで調整可能なプロパティは

14
00:00:32,782 --> 00:00:35,017
レイヤーの名前と IK Pass の設定

15
00:00:35,017 --> 00:00:36,797
だけです

16
00:00:36,797 --> 00:00:39,988
この IK は Inverse Kinematics（逆運動学）の略です

17
00:00:40,764 --> 00:00:42,764
IK Pass をオンにするということは

18
00:00:42,764 --> 00:00:45,588
そのレイヤーに対して OnAnimatorIK 関数が

19
00:00:45,588 --> 00:00:47,588
適切なレイヤーのインデックスと共に

20
00:00:47,588 --> 00:00:49,588
呼ばれるということを意味します

21
00:00:49,588 --> 00:00:52,289
ベースレイヤーのレイヤーインデックスは 0 で

22
00:00:52,289 --> 00:00:54,442
追加レイヤーのインデックスは 1 から始まり

23
00:00:54,442 --> 00:00:56,890
レイヤー毎に 1 ずつ増えていきます

24
00:00:57,550 --> 00:01:00,107
IK および OnAnimatorIK 関数の

25
00:01:00,107 --> 00:01:02,330
詳細については

26
00:01:02,330 --> 00:01:05,030
下記リンク先の情報を参照してください

27
00:01:06,128 --> 00:01:08,128
追加レイヤーにはそれ以前のレイヤーに対して

28
00:01:08,128 --> 00:01:10,753
どう反応するかを指定する追加オプションがあります

29
00:01:11,598 --> 00:01:13,598
新規レイヤーを作成するには Layers の

30
00:01:13,598 --> 00:01:16,424
隣に表示される + アイコンをクリックします

31
00:01:17,573 --> 00:01:19,726
レイヤーには必ず名前がつきますがこれは

32
00:01:19,726 --> 00:01:21,423
Name プロパティで指定します

33
00:01:21,423 --> 00:01:23,423
Weight（重み付け）は対象レイヤーが最終的な

34
00:01:23,423 --> 00:01:25,326
アニメーションに対してどの程度影響するかを示します

35
00:01:25,326 --> 00:01:27,408
Weight を 0 にした場合には

36
00:01:27,408 --> 00:01:29,185
アニメーションは一切反映されません

37
00:01:29,185 --> 00:01:31,240
逆に Weight を 1 にすると

38
00:01:31,240 --> 00:01:33,240
アニメーションを完全に変えてしまいます

39
00:01:34,210 --> 00:01:36,392
Weight（重み付け）の高いレイヤーは低いレイヤーよりも

40
00:01:36,392 --> 00:01:37,795
優先度が高くなります

41
00:01:38,466 --> 00:01:41,195
Weight のデフォルト値はスライダーで指定されますが

42
00:01:41,195 --> 00:01:43,694
この値はランタイムに Animator クラスの

43
00:01:43,694 --> 00:01:46,450
setLayerWeight 関数を使用して

44
00:01:46,450 --> 00:01:48,450
設定することも可能です

45
00:01:49,185 --> 00:01:51,757
レイヤーの Mask プロパティは

46
00:01:51,757 --> 00:01:54,246
アニメーション時に特定の身体部位を

47
00:01:54,246 --> 00:01:56,789
分離するアバターマスクを指定するものです

48
00:01:57,519 --> 00:01:59,851
アバターマスクの詳細については

49
00:01:59,851 --> 00:02:01,851
下記リンク先にあるレッスンをご覧ください

50
00:02:03,124 --> 00:02:05,055
レイヤーのブレンディングには

51
00:02:05,055 --> 00:02:07,055
Override と Additive の 2 種類があります

52
00:02:07,790 --> 00:02:09,790
ブレンディングモードが Override の場合

53
00:02:09,790 --> 00:02:11,790
最終的なアニメーションは

54
00:02:11,790 --> 00:02:13,790
重み付けの低いレイヤーを

55
00:02:13,790 --> 00:02:15,790
オーバーライドします

56
00:02:16,331 --> 00:02:18,331
ブレンディングモードが Additive の場合は

57
00:02:18,331 --> 00:02:20,801
Additive レイヤーのアニメーションが重み付けの

58
00:02:20,801 --> 00:02:22,801
低いレイヤーのアニメーションに加算・合体されて

59
00:02:22,801 --> 00:02:24,106
出力されます

60
00:02:24,583 --> 00:02:26,917
これにはたとえばキャラクターが

61
00:02:26,917 --> 00:02:28,917
疲れてくるにしたがって息が荒くなっていく

62
00:02:28,917 --> 00:02:30,875
といった用途があります

63
00:02:30,875 --> 00:02:32,875
そういった場合には「息を荒くする」アニメーションが

64
00:02:32,875 --> 00:02:36,029
低レイヤーで定義されているアニメーションに

65
00:02:36,029 --> 00:02:37,903
「加算」されます

66
00:02:37,903 --> 00:02:39,682
その場合 Weight（重み付け）はキャラクターの

67
00:02:39,682 --> 00:02:41,682
疲労度として使うこともできます

68
00:02:41,682 --> 00:02:43,765
レイヤーの重み付けが大きくなるにしたがい

69
00:02:43,765 --> 00:02:45,667
「息を荒くする」アニメーションがより顕著に

70
00:02:45,667 --> 00:02:46,900
出力されるようになるわけです

71
00:02:47,753 --> 00:02:50,016
最後のオプションは Sync です

72
00:02:50,419 --> 00:02:52,182
Sync をオンにすると

73
00:02:52,182 --> 00:02:54,099
どのレイヤーと同期（Sync）するのかを

74
00:02:54,099 --> 00:02:55,683
選ぶオプションが表示されます

75
00:02:56,183 --> 00:02:58,183
そしてモーションを持たない点以外は

76
00:02:58,183 --> 00:02:59,974
選択レイヤーと同一のステートマシンが

77
00:02:59,974 --> 00:03:01,529
作成されます

78
00:03:02,071 --> 00:03:04,071
このためアニメーターは常に両レイヤーで

79
00:03:04,071 --> 00:03:06,462
同一ステートにあることになります

80
00:03:06,985 --> 00:03:08,887
これは傷ついた際の

81
00:03:08,887 --> 00:03:10,319
振る舞いなどに使うことができます

82
00:03:10,319 --> 00:03:12,045
具体的には キャラクターが健康な時用のアニメーションセットと

83
00:03:12,045 --> 00:03:14,045
傷ついた時用のアニメーションセットがあるとき

84
00:03:14,045 --> 00:03:16,045
体力が低くなるにつれて

85
00:03:16,045 --> 00:03:18,982
両者をブレンドしていくようにして使います

86
00:03:20,214 --> 00:03:22,395
Timing チェックボックスは同期中のレイヤーで

87
00:03:22,395 --> 00:03:24,339
どの程度の長さアニメーションを再生するかを

88
00:03:24,339 --> 00:03:27,958
重み付けに基づいて決定します

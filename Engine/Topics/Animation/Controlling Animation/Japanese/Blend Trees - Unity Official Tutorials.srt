1
00:00:00,525 --> 00:00:03,046
アニメーションを作成していると複数の

2
00:00:03,046 --> 00:00:05,046
アニメーションを混ぜたい時があります

3
00:00:05,836 --> 00:00:08,293
たとえば左に走る 前方に走る

4
00:00:08,293 --> 00:00:10,788
右に走るというアニメーションがあり

5
00:00:10,788 --> 00:00:13,761
少しだけ左右どちらかに傾けて走らせたい

6
00:00:13,761 --> 00:00:16,764
といったケースですね

7
00:00:18,040 --> 00:00:20,040
この他にも例えば

8
00:00:20,040 --> 00:00:22,512
歩きと走りのアニメーションがある状態で

9
00:00:22,512 --> 00:00:24,512
キャラクターにさまざまな速度で移動を

10
00:00:24,512 --> 00:00:26,332
させたいといったケースも考えられます

11
00:00:26,971 --> 00:00:29,983
そういった時に利用するのがブレンドツリーです

12
00:00:30,828 --> 00:00:33,939
ブレンドツリーを作成するには Animator ウィンドウで

13
00:00:33,939 --> 00:00:35,939
何もない場所を右クリックして

14
00:00:35,939 --> 00:00:39,203
Create State > From New Blend Tree を選択します

15
00:00:40,145 --> 00:00:42,521
これでアニメーションの代わりにモーションとして

16
00:00:42,521 --> 00:00:45,446
ブレンドツリーを持つステートが作成されます

17
00:00:46,278 --> 00:00:48,278
このステートをダブルクリックすると

18
00:00:48,278 --> 00:00:49,947
ブレンドツリーを編集できます

19
00:00:50,502 --> 00:00:52,723
ブレンドツリー上で作業していることは画面左上に

20
00:00:52,723 --> 00:00:55,405
パンくず形式で表示されます

21
00:00:55,872 --> 00:00:57,914
ここでベースレイヤー名をクリックすると

22
00:00:57,914 --> 00:00:59,914
ブレンドツリーから出られます

23
00:01:01,312 --> 00:01:03,781
ブレンドツリーを選択するとそのプロパティが

24
00:01:03,781 --> 00:01:05,781
インスペクターに表示されます

25
00:01:06,391 --> 00:01:07,988
最初に目に入るのが

26
00:01:07,988 --> 00:01:09,905
ブレンドツリーの名前ですね

27
00:01:09,905 --> 00:01:11,725
この名前は格納するステートによって

28
00:01:11,725 --> 00:01:13,086
変化します

29
00:01:13,852 --> 00:01:15,852
次のオプションは Blend Type です

30
00:01:16,352 --> 00:01:18,352
ここは今のところは 1D ブレンドツリーに

31
00:01:18,352 --> 00:01:20,036
集中しておきます

32
00:01:20,548 --> 00:01:22,548
2D ブレンドツリーについては

33
00:01:22,548 --> 00:01:24,548
後ほど取り上げることとします

34
00:01:25,559 --> 00:01:27,849
1D（一次元）ブレンドツリーでは

35
00:01:27,849 --> 00:01:29,849
モーションの再生を 1 つのパラメーターで

36
00:01:29,849 --> 00:01:31,849
制御します

37
00:01:32,625 --> 00:01:34,528
先ほど挙げた左右に走る

38
00:01:34,528 --> 00:01:37,184
例ならばブレンドツリーの

39
00:01:37,184 --> 00:01:39,184
パラメーターは

40
00:01:39,184 --> 00:01:41,623
方向や角速度となります

41
00:01:42,112 --> 00:01:44,332
また歩き / 走りの例であれば

42
00:01:44,332 --> 00:01:46,332
パラメーターは速度となります

43
00:01:47,426 --> 00:01:49,730
次の項目はモーションのリストです

44
00:01:50,327 --> 00:01:53,277
モーションを追加するには + アイコンをクリックします

45
00:01:53,998 --> 00:01:57,064
これをクリックするとオプション Add Motion Field（モーションフィールドを追加）と

46
00:01:57,064 --> 00:01:59,064
New Blend Tree（新規ブレンドツリー）が表示されます

47
00:01:59,757 --> 00:02:01,646
New Blend Tree を選択すると

48
00:02:01,646 --> 00:02:04,005
新しいブレンドツリーがネスト化されて作成され

49
00:02:04,005 --> 00:02:06,005
複数のパラメーターを用いたアニメーションの 

50
00:02:06,005 --> 00:02:08,005
ブレンドが可能になります

51
00:02:08,947 --> 00:02:11,802
ただこれをよりシンプルに

52
00:02:11,802 --> 00:02:14,453
行うならば  通常は

53
00:02:14,453 --> 00:02:16,453
2D ブレンドツリーを使います

54
00:02:17,284 --> 00:02:19,629
なのでここでは単純に Add Motion Field を

55
00:02:19,629 --> 00:02:21,629
選択していきましょう

56
00:02:22,405 --> 00:02:25,605
各モーションフィールドはアニメーションを示し

57
00:02:25,605 --> 00:02:27,716
アニメーションは Project パネルの

58
00:02:27,716 --> 00:02:31,002
Asset からドラッグしたり  丸アイコンをクリックして

59
00:02:31,002 --> 00:02:33,405
リストから選択したりできます

60
00:02:34,538 --> 00:02:37,552
各モーションフィールドには 3 個のプロパティがあります

61
00:02:38,135 --> 00:02:40,135
Threshold（しきい値）は

62
00:02:40,135 --> 00:02:42,039
アニメーションをどの程度

63
00:02:42,039 --> 00:02:45,757
ブレンドするかを示すパラメーターの値です

64
00:02:46,437 --> 00:02:48,437
たとえば歩きアニメーションのしきい値を 5

65
00:02:48,437 --> 00:02:51,239
走りアニメーションのしきい値を 10 とした

66
00:02:51,239 --> 00:02:54,163
としましょう

67
00:02:54,898 --> 00:02:57,453
ここで  Speed パラメーターを 10 に

68
00:02:57,453 --> 00:02:58,964
指定するとブレンドツリーは

69
00:02:58,964 --> 00:03:00,964
走るアニメーションだけを再生します

70
00:03:00,964 --> 00:03:05,410
そして 7.5 を指定した場合には歩きと走りが 50/50

71
00:03:05,410 --> 00:03:07,410
のブレンドで再生されます

72
00:03:08,504 --> 00:03:10,893
次のプロパティは Time Scale（タイムスケール）です

73
00:03:11,391 --> 00:03:14,501
これはアニメーションの再生速度を指定します

74
00:03:14,501 --> 00:03:16,906
通常ステートの Speed プロパティと

75
00:03:16,906 --> 00:03:18,906
同じですね

76
00:03:19,447 --> 00:03:21,845
最後のプロパティは左右ミラーリングするかどうかを

77
00:03:21,845 --> 00:03:24,816
指定するものです

78
00:03:25,979 --> 00:03:28,600
モーションの追加が終わると

79
00:03:28,600 --> 00:03:30,919
モーションリストの上に青色のダイアグラムが

80
00:03:30,919 --> 00:03:32,919
表示されるようになります

81
00:03:33,419 --> 00:03:35,835
これは異なるモーションがパラメーター的に

82
00:03:35,835 --> 00:03:39,253
どう重なるかを示したものです

83
00:03:39,253 --> 00:03:41,323
最低しきい値が左端

84
00:03:41,323 --> 00:03:43,323
最高しきい値が右端になります

85
00:03:44,154 --> 00:03:46,546
ブレンドされたアニメーションのプレビューは

86
00:03:46,546 --> 00:03:49,232
ここで赤色の線を移動させることで行えます

87
00:03:50,505 --> 00:03:52,367
何らかの理由によりブレンドツリー上で

88
00:03:52,367 --> 00:03:54,618
モーションの順番を変更する必要が生じたら

89
00:03:54,618 --> 00:03:56,618
モーションプロパティの左端に表示される

90
00:03:56,618 --> 00:03:59,995
ハンドルをドラッグして自由に入れ替えられます

91
00:04:01,089 --> 00:04:03,814
モーションリストの下にも複数個のプロパティがありますが

92
00:04:03,814 --> 00:04:06,387
これはモーションの属性を調整する際に使用します

93
00:04:07,281 --> 00:04:10,067
通常このプロパティはすべての

94
00:04:10,067 --> 00:04:11,475
モーションフィールドを追加して

95
00:04:11,475 --> 00:04:14,615
アニメーションを指定した後に使います

96
00:04:15,826 --> 00:04:18,655
Automate Thresholds（しきい値を自動化）をオンにすると

97
00:04:18,655 --> 00:04:20,200
各アニメーションのしきい値が指定されて

98
00:04:20,200 --> 00:04:23,668
変更できなくなります

99
00:04:24,265 --> 00:04:26,569
オフにしている場合は以下の

100
00:04:26,569 --> 00:04:28,569
2 つのオプションが使用できます

101
00:04:29,069 --> 00:04:31,069
Compute Thresholds（しきい値を計算）は

102
00:04:31,069 --> 00:04:32,779
各モーションフィールドのしきい値を

103
00:04:32,779 --> 00:04:34,457
計算して指定します

104
00:04:35,182 --> 00:04:37,056
これは選択するルートモーションの

105
00:04:37,056 --> 00:04:39,390
プロパティに基づいて行われます

106
00:04:40,219 --> 00:04:43,490
プロパティはそれぞれ Speed・Velocity X

107
00:04:43,490 --> 00:04:46,264
Velocity Y・Velocity Z そして

108
00:04:46,264 --> 00:04:49,142
各ラジアンの Angular Speed または

109
00:04:49,142 --> 00:04:51,142
度数です

110
00:04:52,153 --> 00:04:54,443
ブレンドツリーのしきい値は多くの場合これら

111
00:04:54,443 --> 00:04:57,030
ルートモーションに基づいているため

112
00:04:57,030 --> 00:04:58,849
これらはアニメーターパラメーターの

113
00:04:58,849 --> 00:05:00,849
サンプルとしても使えます

114
00:05:02,288 --> 00:05:05,103
Adjust Time Scale（タイムスケールを調整）を使うと

115
00:05:05,103 --> 00:05:07,103
各アニメーションの速度を

116
00:05:07,103 --> 00:05:08,964
均質化できます

117
00:05:08,964 --> 00:05:10,756
これは各アニメーションをルートモーションと

118
00:05:10,756 --> 00:05:13,969
同速度で再生できるということです

119
00:05:15,229 --> 00:05:17,229
2D ブレンドツリーは 1D ブレンドツリーと

120
00:05:17,229 --> 00:05:20,097
とても似た挙動をしますが

121
00:05:20,097 --> 00:05:22,497
ブレンドに使うパラメーターが 1 つではなく

122
00:05:22,497 --> 00:05:24,221
2 つになります

123
00:05:24,928 --> 00:05:28,046
2D ブレンドツリーは 3 種に大別されます

124
00:05:28,046 --> 00:05:31,710
2 つは方向に基づいてブレンドするもので

125
00:05:31,710 --> 00:05:34,478
それぞれ 2D Simple Directional

126
00:05:34,478 --> 00:05:36,909
と 2D Freeform Directional と呼ばれます

127
00:05:37,461 --> 00:05:40,668
最後の種類は  2D Freeform Cartesian で

128
00:05:40,668 --> 00:05:42,668
これはパラメーターが方向を示さないような

129
00:05:42,668 --> 00:05:45,138
シチュエーションで使用されます

130
00:05:46,328 --> 00:05:48,675
2D Simple Directional は動作を

131
00:05:48,675 --> 00:05:50,675
方向パラメーターに基いてブレンドしたい場合かつ

132
00:05:50,675 --> 00:05:53,092
各方向用のアニメーションが

133
00:05:53,092 --> 00:05:54,966
ひとつであるとき

134
00:05:54,966 --> 00:05:59,704
前進・後退・右歩きなどに使われます

135
00:06:00,425 --> 00:06:03,781
2D Freeform Directional も似た種類のものですが

136
00:06:03,781 --> 00:06:05,991
こちらは同一方向に対して複数の

137
00:06:05,991 --> 00:06:07,522
アニメーションを含められます

138
00:06:07,522 --> 00:06:11,469
たとえば 前方歩きと前方走りのような場合ですね

139
00:06:12,701 --> 00:06:15,704
2D Freeform Cartesian は

140
00:06:15,704 --> 00:06:18,256
パラメーターが方向でない場合...

141
00:06:18,256 --> 00:06:21,783
たとえば速度と角速度の場合などに利用されます

142
00:06:22,794 --> 00:06:24,835
いずれのタイプのブレンドツリーを作成しても

143
00:06:24,835 --> 00:06:26,502
やることは同様です

144
00:06:26,502 --> 00:06:28,502
タイプを選択したら

145
00:06:28,502 --> 00:06:30,502
X 軸と Y 軸を示すアニメーター

146
00:06:30,502 --> 00:06:34,429
パラメーターを選択します

147
00:06:35,026 --> 00:06:37,164
方向タイプの場合  標準的な X 軸

148
00:06:37,164 --> 00:06:41,020
パラメーターは velocity X 

149
00:06:41,020 --> 00:06:43,764
そして 標準的 Y 軸パラメーターはおそらく

150
00:06:43,764 --> 00:06:45,764
velocity Z でしょう

151
00:06:46,499 --> 00:06:48,346
Freeform Cartesian の場合は

152
00:06:48,346 --> 00:06:50,346
より自由に設定できます

153
00:06:51,702 --> 00:06:54,777
パラメーターの設定が完了したら次は

154
00:06:54,777 --> 00:06:56,693
モーションの追加です

155
00:06:56,693 --> 00:06:59,012
2D ブレンドツリーと同様

156
00:06:59,012 --> 00:07:02,108
ブレンドツリーにもモーションフィールドにもできます

157
00:07:02,608 --> 00:07:05,568
ただし 1D ブレンドツリーと異なり

158
00:07:05,568 --> 00:07:08,555
この時の追加順序は関係ありません

159
00:07:09,463 --> 00:07:11,463
モーションを追加すると

160
00:07:11,463 --> 00:07:13,463
しきい値に応じてモーションの

161
00:07:13,463 --> 00:07:15,463
ダイアグラムが表示されます

162
00:07:15,935 --> 00:07:18,499
これも同じく

163
00:07:18,499 --> 00:07:21,286
1D ブレンドツリーのように機能しますが

164
00:07:21,286 --> 00:07:25,097
しきい値が 2 つであるため X しきい値と Y しきい値で

165
00:07:25,097 --> 00:07:27,097
ダイアグラムが 2 次元になります

166
00:07:28,274 --> 00:07:30,746
各モーションはダイアグラム上でドラッグしたり

167
00:07:30,746 --> 00:07:32,746
しきい値を設定したり

168
00:07:32,746 --> 00:07:35,319
Computer Positions オプションを使用したりして

169
00:07:35,319 --> 00:07:38,376
手動で配置できます

170
00:07:38,876 --> 00:07:41,127
この場合 1D ブレンドツリーの Compute Thresholds

171
00:07:41,127 --> 00:07:44,003
オプションのように機能しますが

172
00:07:44,003 --> 00:07:46,824
計算時に両パラメーターが考慮されます

173
00:07:48,340 --> 00:07:51,070
1 Dブレンドツリーではモーションの

174
00:07:51,070 --> 00:07:53,070
プレビュー用に赤い線がありましたが

175
00:07:53,070 --> 00:07:55,912
2D ブレンドツリーでは赤い点をドラッグ

176
00:07:55,912 --> 00:07:57,912
することでプレビューします

1
00:00:01,389 --> 00:00:05,099
Phase number 10 of 10.

2
00:00:07,750 --> 00:00:11,311
We are going to create our game over state.

3
00:00:11,311 --> 00:00:13,185
We are able to shoot enemies

4
00:00:13,185 --> 00:00:15,185
and enemies are able to attack us

5
00:00:15,185 --> 00:00:17,185
but we currently want to show the player when

6
00:00:17,185 --> 00:00:20,130
the game has ended, apart from having you fall over.

7
00:00:20,778 --> 00:00:22,778
So we're going to do that by

8
00:00:22,778 --> 00:00:24,778
creating a bunch of other UI elements.

9
00:00:24,778 --> 00:00:26,778
The first thing I'm going to do is click

10
00:00:26,778 --> 00:00:29,691
on the 2D mode of the scene view

11
00:00:29,691 --> 00:00:31,691
and then I'm going to double click

12
00:00:31,691 --> 00:00:35,329
my HUD Canvas to frame selected as before.

13
00:00:36,014 --> 00:00:39,429
Remember that that is shortcut F if you wanted to do that

14
00:00:39,429 --> 00:00:41,001
instead you can click on any object and

15
00:00:41,001 --> 00:00:44,480
F to frame it, I'm just zooming in to fill my screen.

16
00:00:45,153 --> 00:00:48,346
And I'm going to right click that HUD canvas

17
00:00:48,346 --> 00:00:50,025
and go to UI

18
00:00:50,597 --> 00:00:52,010
and Image.

19
00:00:53,084 --> 00:00:54,846
We're going to create an image that

20
00:00:54,846 --> 00:00:56,678
stretches over the entire HUD Canvas,

21
00:00:56,678 --> 00:00:58,175
the entire screen,

22
00:00:58,175 --> 00:01:01,054
and we are going to fade it out.

23
00:01:01,054 --> 00:01:05,292
Rename this from Image to ScreenFader.

24
00:01:06,330 --> 00:01:10,230
ScreenFader, capital S and F.

25
00:01:12,000 --> 00:01:15,194
Then in the rect transform

26
00:01:15,708 --> 00:01:18,000
anchor presets click the button

27
00:01:18,000 --> 00:01:20,414
and we're going to Alt-click

28
00:01:20,414 --> 00:01:23,274
the lower right preset,

29
00:01:23,274 --> 00:01:26,023
which is stretch in both dimensions.

30
00:01:26,023 --> 00:01:28,023
That will stretch it over the entirety

31
00:01:28,023 --> 00:01:30,023
of the canvas, and currently because

32
00:01:30,023 --> 00:01:32,627
it is white it will just block everything out.

33
00:01:35,598 --> 00:01:39,240
Then what we're going to do is in our Image script

34
00:01:39,240 --> 00:01:41,171
I'm going to click on the color block

35
00:01:41,171 --> 00:01:44,173
and I'm going to pick a shade of light blue,

36
00:01:44,173 --> 00:01:45,752
something like this.

37
00:01:45,752 --> 00:01:47,043
So we're not going to pick a shade of black,

38
00:01:47,043 --> 00:01:49,043
we want to see our drop shadow on our score

39
00:01:49,043 --> 00:01:51,885
and our game over, I'm going to pick a light blue.

40
00:01:53,875 --> 00:01:56,220
Then we need to add our game over message.

41
00:01:56,220 --> 00:01:59,413
So yet again reselect the HUD Canvas,

42
00:01:59,413 --> 00:02:03,146
right click, UI Text.

43
00:02:04,222 --> 00:02:06,222
As before it's going to create it

44
00:02:06,222 --> 00:02:08,222
right in the centre of that.

45
00:02:08,222 --> 00:02:11,504
We're going to rename thisGameOverText.

46
00:02:13,375 --> 00:02:16,528
Capital G, O and T.

47
00:02:18,278 --> 00:02:21,348
Then what we're going to do is make sure that it's

48
00:02:21,348 --> 00:02:24,907
centred perfectly, so we're going to Alt-click

49
00:02:24,907 --> 00:02:27,724
the centre preset, it should be centred anyway

50
00:02:27,724 --> 00:02:29,724
but we're just making sure.

51
00:02:30,472 --> 00:02:35,207
Then I'm going to change my width to 300

52
00:02:35,207 --> 00:02:37,515
and a height of 50.

53
00:02:40,251 --> 00:02:43,155
Then we're going to write in an actual message.

54
00:02:43,155 --> 00:02:45,445
In the Text component we're going to say

55
00:02:45,445 --> 00:02:46,913
Game Over.

56
00:02:46,913 --> 00:02:49,354
Then we're going to say the font

57
00:02:49,354 --> 00:02:52,312
is also our existing font, Luckiest Guy.

58
00:02:52,730 --> 00:02:54,730
So circle select to pick the font.

59
00:02:55,769 --> 00:02:58,904
And the font size, we're going to go with 50.

60
00:02:59,837 --> 00:03:01,962
The alignments are going to be

61
00:03:01,962 --> 00:03:04,901
centre and middle, under Paragraph.

62
00:03:06,673 --> 00:03:08,964
And I'm going to scroll down and choose

63
00:03:08,964 --> 00:03:11,963
white from the color picker, just like before.

64
00:03:13,250 --> 00:03:15,656
And as before we need a drop shadow

65
00:03:15,656 --> 00:03:18,629
so we're going to Add Component, so I'll type in

66
00:03:18,629 --> 00:03:22,907
S-H-A, press Return to add the Shadow script.

67
00:03:24,128 --> 00:03:26,128
Yet again I'm going to put in 2

68
00:03:26,128 --> 00:03:29,750
and -2 just to accentuate the effect a little bit.

69
00:03:30,510 --> 00:03:34,315
Then, very importantly we need to reorder

70
00:03:34,315 --> 00:03:35,345
how these are arranged.

71
00:03:35,345 --> 00:03:38,589
This is a really important thing to learn about the new UI system.

72
00:03:38,589 --> 00:03:41,676
What you may have noticed as of Unity 4.5

73
00:03:41,676 --> 00:03:43,810
and now in Unity 4.6

74
00:03:43,810 --> 00:03:47,272
the hierarchy doesn't show in A to Z order.

75
00:03:47,625 --> 00:03:51,403
You'll notice that things that are H is below a Z.

76
00:03:51,403 --> 00:03:53,403
The reason for that is the UI

77
00:03:53,403 --> 00:03:56,024
system needs to use the hierarchy

78
00:03:56,024 --> 00:03:58,477
to order it's render order.

79
00:03:59,106 --> 00:04:01,923
The way that this works, if you're used to Photoshop,

80
00:04:01,923 --> 00:04:04,249
you have to think backwards.

81
00:04:04,913 --> 00:04:08,059
The lower most child object

82
00:04:08,059 --> 00:04:10,748
is rendered in front of everything else.

83
00:04:11,270 --> 00:04:13,270
So currently we have

84
00:04:13,270 --> 00:04:16,231
DamageImage at the bottom followed by

85
00:04:16,231 --> 00:04:18,145
HealthUI rendered on top of that,

86
00:04:18,145 --> 00:04:22,196
followed by ScoreText, ScreenFader then GameOverText.

87
00:04:22,196 --> 00:04:25,118
However, we don't want it in that order.

88
00:04:25,118 --> 00:04:27,581
We want our HealthUI to be at the bottom

89
00:04:27,581 --> 00:04:29,880
so that when we fade in this blue screen

90
00:04:29,880 --> 00:04:33,459
it obscures or renders in front of that HealthUI.

91
00:04:33,459 --> 00:04:35,643
You don't need to know that you had no health

92
00:04:35,643 --> 00:04:38,626
left when you died because that's pretty obvious,

93
00:04:38,626 --> 00:04:40,124
that's why you died.

94
00:04:40,124 --> 00:04:43,461
So we're going to drag and drop these to reorder.

95
00:04:43,461 --> 00:04:45,461
You need to be careful with this and

96
00:04:45,461 --> 00:04:48,925
just watch me do it first because it can be a bit clunky.

97
00:04:48,925 --> 00:04:51,274
What I want you to do is just watch for a second.

98
00:04:52,231 --> 00:04:54,501
What I'm going to do is move my healthUI

99
00:04:54,501 --> 00:04:56,501
to above, so I don't want to 

100
00:04:56,501 --> 00:04:59,545
accidentally drop on to something else, like this,

101
00:04:59,545 --> 00:05:01,545
I want to drop it so that it has the line

102
00:05:01,545 --> 00:05:04,519
and the small circle and drop it above.

103
00:05:04,913 --> 00:05:07,028
I'll slowly get these in to the right order.

104
00:05:07,471 --> 00:05:09,471
With the ScreenFader, that needs to be the

105
00:05:09,471 --> 00:05:12,456
third thing, so I'll drag that between these two

106
00:05:12,456 --> 00:05:13,984
so the line shows up.

107
00:05:13,984 --> 00:05:18,073
And then GameOverText, and ScoreText at the end.

108
00:05:18,625 --> 00:05:21,058
The HealthUI will render first,

109
00:05:21,058 --> 00:05:22,991
and the DamageImage is next.

110
00:05:22,991 --> 00:05:26,083
That's intermittently happening so it doesn't matter too much.

111
00:05:26,083 --> 00:05:28,083
The ScreenFader needs to obscure both

112
00:05:28,083 --> 00:05:30,083
of those by fading in and we'll finish

113
00:05:30,083 --> 00:05:32,507
the game with GameOverText and ScoreText

114
00:05:32,507 --> 00:05:35,026
still showing on top of that blue screen.

115
00:05:35,026 --> 00:05:36,784
So we've sorted that render order.

116
00:05:36,784 --> 00:05:38,784
Just to remind you of the render order,

117
00:05:39,250 --> 00:05:40,490
this is what it is;

118
00:05:40,490 --> 00:05:42,983
Health UI first, then DamageImage,

119
00:05:42,983 --> 00:05:44,762
ScreenFader, GameOverText,

120
00:05:44,762 --> 00:05:47,748
going own the list so that the render order

121
00:05:47,748 --> 00:05:49,546
ends with ScoreText.

122
00:05:50,240 --> 00:05:54,578
The ScreenFader hierarchy by default needs to be

123
00:05:54,578 --> 00:05:55,851
transparent, we don't want to start the game

124
00:05:55,851 --> 00:05:57,851
with this blue obscuring everything.

125
00:05:58,149 --> 00:06:00,458
I'm just going to save my scene.

126
00:06:00,458 --> 00:06:02,814
And then with my ScreenFader 

127
00:06:02,814 --> 00:06:05,316
reselected in the hierarchy I'm going to

128
00:06:05,316 --> 00:06:06,504
click on the color block

129
00:06:08,039 --> 00:06:10,521
and you'll see sliders at the bottom

130
00:06:10,521 --> 00:06:12,521
RGB, Red, Green, Blue

131
00:06:12,521 --> 00:06:13,704
and A for Alpha.

132
00:06:13,704 --> 00:06:15,704
So that's how you do transparent things,

133
00:06:15,704 --> 00:06:18,584
you drag the Alpha to 0.

134
00:06:20,565 --> 00:06:23,908
Then the same thing for the GameOverText.

135
00:06:24,418 --> 00:06:26,680
Select GameOverText and in

136
00:06:26,680 --> 00:06:30,931
the Color for the text component, open the block,

137
00:06:30,931 --> 00:06:33,228
set the Alpha to 0.

138
00:06:33,228 --> 00:06:35,783
Drag the slider down to 0.

139
00:06:37,206 --> 00:06:39,206
So at the start of the game these are

140
00:06:39,206 --> 00:06:42,192
there and we're going to use animation in just a second

141
00:06:42,192 --> 00:06:44,374
to animate those in, make them look cool,

142
00:06:44,374 --> 00:06:46,221
and we're going to create a state machine for

143
00:06:46,221 --> 00:06:47,743
when the game ends.

144
00:06:48,176 --> 00:06:50,340
Because we previously used

145
00:06:50,340 --> 00:06:53,123
pre-animated FPX files

146
00:06:53,123 --> 00:06:55,857
they came with an animator component

147
00:06:55,857 --> 00:06:57,258
already attached to them.

148
00:06:57,258 --> 00:06:59,258
We just needed to create the controller,

149
00:06:59,258 --> 00:07:01,258
the state machine, to apply to it.

150
00:07:01,691 --> 00:07:04,278
But you can use the animator with anything.

151
00:07:04,278 --> 00:07:07,018
A lot of people get confused because

152
00:07:07,018 --> 00:07:09,477
when we added the new animation system

153
00:07:09,477 --> 00:07:11,652
it has a nickname, which is MeshAnim.

154
00:07:12,037 --> 00:07:14,037
And a lot of people think that that is only

155
00:07:14,037 --> 00:07:16,200
useable for character animation.

156
00:07:16,200 --> 00:07:18,076
It's not true at all, you can animate

157
00:07:18,076 --> 00:07:19,999
anything you want to, it's just a 

158
00:07:19,999 --> 00:07:22,611
state machine you can apply animation clips to.

159
00:07:22,611 --> 00:07:25,271
So we're going to do exactly that with our UI right now.

160
00:07:25,271 --> 00:07:28,343
Even the term animation is a bit misleading because

161
00:07:28,343 --> 00:07:30,990
it makes you think that some form of motion is involved

162
00:07:30,990 --> 00:07:32,990
and in fact animation in this case

163
00:07:32,990 --> 00:07:35,803
can literally be the changing of anything,

164
00:07:35,803 --> 00:07:38,492
positional information such as movement but also

165
00:07:38,492 --> 00:07:42,329
colors, alphas, values, turning things on and off.

166
00:07:42,329 --> 00:07:43,793
Literally anything you want.

167
00:07:43,793 --> 00:07:46,991
So you can animate any public property of

168
00:07:46,991 --> 00:07:49,957
any component on any game object in Unity.

169
00:07:50,303 --> 00:07:52,476
We're going to do that with the UI

170
00:07:52,476 --> 00:07:55,053
right now to give you an example of that.

171
00:07:55,448 --> 00:07:57,364
Because when we start adding

172
00:07:57,364 --> 00:07:59,364
animation Unity's going to automatically

173
00:07:59,364 --> 00:08:03,238
assign the animator, I.E. the holder for state machine.

174
00:08:03,238 --> 00:08:05,788
We need to select the right object, so we're going to choose

175
00:08:05,788 --> 00:08:08,399
the HUD Canvas as the one we're going to

176
00:08:08,399 --> 00:08:10,097
start adding animation to.

177
00:08:10,097 --> 00:08:12,471
That way when we add one clip

178
00:08:12,471 --> 00:08:14,471
we'll be able to address any property of

179
00:08:14,471 --> 00:08:16,111
any of the child objects.

180
00:08:16,111 --> 00:08:17,227
That's really important.

181
00:08:17,851 --> 00:08:20,321
With the HUD Canvas selected

182
00:08:20,321 --> 00:08:22,321
I want you to go to Window

183
00:08:22,658 --> 00:08:23,669
Animation.

184
00:08:24,484 --> 00:08:27,240
Window - Animation, not the animator,

185
00:08:27,240 --> 00:08:30,289
the actual timeline, it should look like this.

186
00:08:30,725 --> 00:08:32,725
And I'm going to drag this tab and

187
00:08:32,725 --> 00:08:34,654
dock it by the game view,

188
00:08:34,654 --> 00:08:36,654
because when you're animating you're mostly going to look

189
00:08:36,654 --> 00:08:38,908
at the scene view and you don't really need to worry

190
00:08:38,908 --> 00:08:41,816
about the game view so I'm going to dock that in the same place.

191
00:08:43,144 --> 00:08:45,144
Then if I don't already have a 

192
00:08:45,144 --> 00:08:47,481
clip made as soon as I add a curve,

193
00:08:47,481 --> 00:08:49,804
adding curves basically means add

194
00:08:49,804 --> 00:08:51,958
property that I want to animate of

195
00:08:51,958 --> 00:08:53,958
anything that's attached to the game object

196
00:08:53,958 --> 00:08:55,331
currently selected.

197
00:08:55,933 --> 00:08:57,933
I click Add Curve and you need to

198
00:08:57,933 --> 00:09:00,761
decide 'whoa, you don't have an animation yet'.

199
00:09:03,652 --> 00:09:06,438
So it pops up a Create New Animation box.

200
00:09:07,465 --> 00:09:09,431
Because we've made that animation folder before

201
00:09:09,431 --> 00:09:11,431
we started I'm going to select that as the

202
00:09:11,431 --> 00:09:13,000
place to put it

203
00:09:13,000 --> 00:09:15,135
and I'm going to name my new clip

204
00:09:15,135 --> 00:09:16,984
GameOverClip.

205
00:09:17,376 --> 00:09:19,434
Like that. Press Save.

206
00:09:20,066 --> 00:09:22,066
So now you'll see that the

207
00:09:22,066 --> 00:09:24,945
animation window is in Record Mode,

208
00:09:24,945 --> 00:09:26,945
the Record Mode button is highlighted

209
00:09:26,945 --> 00:09:29,722
and it's asking us which property

210
00:09:29,722 --> 00:09:31,151
we'd like to animate.

211
00:09:31,151 --> 00:09:33,477
It's worth noting that it is in fact

212
00:09:33,477 --> 00:09:36,905
in record mode so anything you do in the scene view

213
00:09:36,905 --> 00:09:39,006
or the inspector is going to get recorded.

214
00:09:39,006 --> 00:09:41,943
And you need to be careful exactly the things you touch.

215
00:09:41,943 --> 00:09:44,859
A really quick and easy way to know if you're in record mode

216
00:09:44,859 --> 00:09:47,825
is you see the player icons at the top are red?

217
00:09:47,825 --> 00:09:49,850
That means you are in record mode.

218
00:09:50,303 --> 00:09:53,207
Which means anything you're doing right now is being recorded.

219
00:09:53,207 --> 00:09:55,375
If you change stuff it's going to think you intended

220
00:09:55,375 --> 00:09:56,767
for that to be part of the animation.

221
00:09:56,767 --> 00:09:58,767
There's a couple of different ways to work with this window.

222
00:09:58,767 --> 00:10:00,456
We're going to work in a very specific way,

223
00:10:00,456 --> 00:10:02,960
but there's a more freestyle way where you can

224
00:10:02,960 --> 00:10:05,584
move the playhead along, change a property

225
00:10:06,045 --> 00:10:08,695
and then it's going to get recorded straight in to your animation.

226
00:10:08,695 --> 00:10:10,322
We'll do a little bit of that and we'll do

227
00:10:10,322 --> 00:10:12,473
a bit of filling it in manually.

228
00:10:12,473 --> 00:10:14,473
Like I said adding curve is choosing

229
00:10:14,473 --> 00:10:16,263
a property that you want to animate.

230
00:10:18,032 --> 00:10:20,235
The list here shows me first of all

231
00:10:20,235 --> 00:10:23,748
the components attached to the game object we are animating.

232
00:10:23,748 --> 00:10:25,857
So there's a rect transform, there's a canvas,

233
00:10:25,857 --> 00:10:28,172
there's the graphic raycast of the canvas group,

234
00:10:28,172 --> 00:10:31,185
and now it's added also an animator component because

235
00:10:31,185 --> 00:10:32,981
we're going to drive this with a state machine

236
00:10:32,981 --> 00:10:36,105
Unity knows that's the way it needs to work so it's added it for us.

237
00:10:36,594 --> 00:10:39,874
It also very helpfully created

238
00:10:40,486 --> 00:10:42,747
an animator controller asset for it

239
00:10:42,747 --> 00:10:44,867
and assigned it for us as well.

240
00:10:48,699 --> 00:10:51,673
So now we also get

241
00:10:51,673 --> 00:10:53,955
the child objects, so all of these things that are attached

242
00:10:53,955 --> 00:10:55,955
to HUD Canvas are also animatable.

243
00:10:56,737 --> 00:10:58,737
So what we're going to do is add

244
00:10:58,737 --> 00:11:00,547
a number of properties that we want to animate.

245
00:11:00,547 --> 00:11:03,500
The first one we want to animate is the GameOverText.

246
00:11:03,500 --> 00:11:05,394
We want to make that fade in.

247
00:11:05,394 --> 00:11:08,224
So if you expand GameOverText

248
00:11:08,224 --> 00:11:12,119
and then expand the text component

249
00:11:12,421 --> 00:11:15,386
and click the + icon for color,

250
00:11:15,386 --> 00:11:17,076
you can see Color here, 

251
00:11:17,076 --> 00:11:20,124
click the + icon and you will get

252
00:11:20,124 --> 00:11:24,838
some keyframes added in at 0 and at 1 second.

253
00:11:27,185 --> 00:11:28,679
And you also get

254
00:11:29,368 --> 00:11:32,166
the properties of that particular thing.

255
00:11:32,166 --> 00:11:34,398
So next I'm going to add another curve.

256
00:11:35,241 --> 00:11:40,324
I'm going to go to GameOverText Rect Transform

257
00:11:40,788 --> 00:11:42,239
and Scale.

258
00:11:43,013 --> 00:11:45,013
Add a property for that.

259
00:11:46,229 --> 00:11:51,104
Then ScreenFader - Image - Color, 

260
00:11:51,104 --> 00:11:52,560
so these are all things we want to animate.

261
00:11:52,560 --> 00:11:55,819
Remember we're animating in the alpha of the ScreenFader.

262
00:11:55,819 --> 00:11:57,819
We're going to animate the fading of the

263
00:11:57,819 --> 00:11:59,593
word Game Over on the text.

264
00:11:59,593 --> 00:12:00,821
And we're also going to scale it, 

265
00:12:00,821 --> 00:12:02,547
we're going to make it bounce when it comes in,

266
00:12:02,547 --> 00:12:04,547
so we're going to use Scale for that.

267
00:12:05,060 --> 00:12:07,308
Finally ScoreText, we're just going to shrink

268
00:12:07,308 --> 00:12:09,541
down a little bit when the game is over,

269
00:12:09,541 --> 00:12:11,048
we're going to add one more curve,

270
00:12:11,048 --> 00:12:14,625
ScoreText - Rect Transform - Scale.

271
00:12:17,379 --> 00:12:19,209
And the last thing I'm going to do

272
00:12:19,209 --> 00:12:22,212
is to select the top most keyframe of

273
00:12:22,212 --> 00:12:23,875
the end keyframes.

274
00:12:23,875 --> 00:12:26,620
So what you can see is there's an empty row

275
00:12:26,620 --> 00:12:28,803
in your list of curves.

276
00:12:28,803 --> 00:12:31,395
Now what that does is it allows you to

277
00:12:31,395 --> 00:12:33,809
grab all of them that are in line.

278
00:12:33,809 --> 00:12:35,971
So I can click on my top keyframe, here,

279
00:12:36,407 --> 00:12:40,729
I can drag this back to frame 30 and let go.

280
00:12:40,729 --> 00:12:42,687
That will shorten the entire animation.

281
00:12:42,687 --> 00:12:44,687
So I'm grabbing this top one and it's pulling

282
00:12:44,687 --> 00:12:48,048
all of the end keyframes for my animation

283
00:12:48,048 --> 00:12:50,048
to frame 30.

284
00:12:50,610 --> 00:12:53,019
So now we're going to actually start animating.

285
00:12:53,019 --> 00:12:55,019
When you move your mouse over

286
00:12:55,019 --> 00:12:58,150
this timeline here where I'm moving my mouse now,

287
00:12:58,150 --> 00:13:00,150
you can drag around and you'll see the red line

288
00:13:00,150 --> 00:13:02,734
and that's the playhead moving around.

289
00:13:03,268 --> 00:13:05,466
I'm going to move to frame 20.

290
00:13:05,466 --> 00:13:08,126
You can see here that the number that you're

291
00:13:08,126 --> 00:13:10,042
currently on is represented.

292
00:13:10,042 --> 00:13:12,042
So if I want to move to frame 20 I can drag

293
00:13:12,042 --> 00:13:14,014
or I can type in here frame 20.

294
00:13:14,014 --> 00:13:17,050
And then I want to create a keyframe

295
00:13:17,050 --> 00:13:20,538
for the GameOverText Scale.

296
00:13:20,538 --> 00:13:23,148
So I'm going to drag this divider so that I can see

297
00:13:23,148 --> 00:13:24,965
the end of that property.

298
00:13:24,965 --> 00:13:27,538
So the line between the list of curves

299
00:13:27,538 --> 00:13:30,044
and the timeline itself can be dragged

300
00:13:30,044 --> 00:13:31,096
to expand it.

301
00:13:31,721 --> 00:13:35,366
GameOverText Rect Transform Scale is the first one.

302
00:13:35,914 --> 00:13:39,025
I select the property so it's highlighted in blue,

303
00:13:39,025 --> 00:13:41,716
and I press K to make a new keyframe,

304
00:13:41,716 --> 00:13:43,716
or I can use this button here,

305
00:13:43,716 --> 00:13:45,814
to add a keyframe as well.

306
00:13:45,814 --> 00:13:48,484
You can also just double click in that row.

307
00:13:48,955 --> 00:13:51,391
Okay, so, once I've done that

308
00:13:51,679 --> 00:13:54,481
I can move to frame 0

309
00:13:55,921 --> 00:13:58,132
and expand this.

310
00:13:58,132 --> 00:14:01,575
And what you'll see is that I've got 1, 1, 1.

311
00:14:01,575 --> 00:14:04,527
So when we start off the scale is all at 1.

312
00:14:05,230 --> 00:14:07,936
But we want it to increase

313
00:14:07,936 --> 00:14:09,936
from 0 scale and bounce up

314
00:14:09,936 --> 00:14:11,704
and then shrink back down.

315
00:14:11,704 --> 00:14:14,505
So drag the playhead back to 0.

316
00:14:14,505 --> 00:14:17,844
Then I'm going to enter in 0, 0, 0,

317
00:14:18,547 --> 00:14:21,834
in the Scale property, so if you expand

318
00:14:21,834 --> 00:14:24,939
GameOverText Rect Transform Scale

319
00:14:24,939 --> 00:14:26,939
you can click on those boxes and type in 0

320
00:14:26,939 --> 00:14:28,278
and hit return.

321
00:14:29,234 --> 00:14:31,234
What you'll notice if you then drag

322
00:14:31,234 --> 00:14:36,071
the playhead is that that rect transform is increasing.

323
00:14:36,071 --> 00:14:38,071
We haven't animated the alpha yet but you can

324
00:14:38,071 --> 00:14:40,657
see the rect of the box is popping up

325
00:14:40,657 --> 00:14:42,657
as I drag over those.

326
00:14:43,507 --> 00:14:45,247
What I want you to notice as well is that

327
00:14:45,247 --> 00:14:47,817
we can also address this

328
00:14:47,817 --> 00:14:49,387
using the inspector.

329
00:14:49,387 --> 00:14:52,524
So the GameOverText Rect Transform Scale,

330
00:14:52,524 --> 00:14:54,834
with that selected I could also use the inspector

331
00:14:54,834 --> 00:14:57,157
so when we're in record mode anything

332
00:14:57,157 --> 00:14:59,213
that's setup for animation, anything we've

333
00:14:59,213 --> 00:15:00,933
added as a curve in the list

334
00:15:01,368 --> 00:15:02,768
is highlighted in red.

335
00:15:03,473 --> 00:15:07,233
So you can see that change as I drag in the inspector.

336
00:15:08,941 --> 00:15:10,941
The next thing we're going to do is go to that

337
00:15:10,941 --> 00:15:12,941
frame 20 where we've added that new keyframe.

338
00:15:13,131 --> 00:15:15,131
And because we're in record mode I can

339
00:15:15,131 --> 00:15:20,160
go to the inspector and type 1.2 for all axis.

340
00:15:20,659 --> 00:15:23,755
1.2 for the scale of all of those.

341
00:15:24,254 --> 00:15:26,254
So where it's red and says 1,

342
00:15:26,388 --> 00:15:28,388
replace that with 1.2.

343
00:15:29,027 --> 00:15:31,027
What that's doing, if I drag now,

344
00:15:31,027 --> 00:15:33,160
is it's popping up and then bouncing back down.

345
00:15:33,160 --> 00:15:35,905
So at frame 20 it's a scale of 1.2

346
00:15:35,905 --> 00:15:39,301
and then we know that it's a scale of 1 at the end.

347
00:15:41,240 --> 00:15:42,944
Move the playhead to frame 20,

348
00:15:42,944 --> 00:15:44,944
set the Scale to 1.2,

349
00:15:46,539 --> 00:15:49,660
and then you should see that it's popping up.

350
00:15:51,641 --> 00:15:53,980
Then to finish this off we're moving

351
00:15:53,980 --> 00:15:56,100
our playhead to frame 30.

352
00:15:56,100 --> 00:15:59,402
Again, please make sure you are on that frame,

353
00:15:59,402 --> 00:16:01,627
so frame 30 is represented in this box.

354
00:16:02,597 --> 00:16:05,551
And then we need to just set a couple of other properties.

355
00:16:05,551 --> 00:16:08,209
So GameOverText - Text Colour.

356
00:16:08,553 --> 00:16:10,553
We need the Alpha to be 1.

357
00:16:10,869 --> 00:16:12,939
So I can expand that

358
00:16:12,939 --> 00:16:16,095
and set the Alpha to 1 so I know that it's going to

359
00:16:16,095 --> 00:16:20,191
increase and become fully visible by frame 30.

360
00:16:21,389 --> 00:16:22,892
 Then I'm going to close it back down

361
00:16:23,644 --> 00:16:25,644
and with the ScreenFader I want

362
00:16:25,644 --> 00:16:27,644
that to fade up to 1 as well

363
00:16:27,644 --> 00:16:29,997
so I'm going to set the Color.A property to 1,

364
00:16:29,997 --> 00:16:31,997
so the color alpha to 1.

365
00:16:32,489 --> 00:16:34,489
As soon as I do it I see that the blue appears,

366
00:16:34,489 --> 00:16:35,995
so that's correct.

367
00:16:36,679 --> 00:16:39,226
And finally ScoreText

368
00:16:40,364 --> 00:16:44,060
at the end should be a scale of 0.8

369
00:16:44,060 --> 00:16:47,145
So I'm going to set those in, 0.8.

370
00:16:47,145 --> 00:16:49,145
Basically we're just shrinking that down

371
00:16:49,145 --> 00:16:51,145
so it makes Game Over more prominent.

372
00:16:51,145 --> 00:16:53,899
We don't want them to be the same size, we just scale one down

373
00:16:53,899 --> 00:16:55,899
as the GameOverText bounces up.

374
00:16:57,480 --> 00:17:00,012
If you've done those correctly, as you scrub over

375
00:17:00,012 --> 00:17:02,336
it should be doing something like this.

376
00:17:03,586 --> 00:17:06,602
ScoreText is going down, the blue is fading up,

377
00:17:06,602 --> 00:17:09,604
Game Over is bouncing in and becoming more visible.

378
00:17:09,604 --> 00:17:12,084
Whilst HealthUI is hiding

379
00:17:12,084 --> 00:17:14,548
or disappearing behind the ScreenFader.

380
00:17:15,813 --> 00:17:18,655
What we should have is our clip

381
00:17:18,965 --> 00:17:20,965
and what you'll notices is that if we press play

382
00:17:20,965 --> 00:17:23,338
in the animation view it's constantly looping.

383
00:17:23,640 --> 00:17:25,245
We don't want that to happen.

384
00:17:25,900 --> 00:17:27,900
But before we address that what we're going to

385
00:17:27,900 --> 00:17:31,438
do is to move all of our keyframes to

386
00:17:31,438 --> 00:17:33,438
further on in the timeline, because we don't want

387
00:17:33,438 --> 00:17:35,438
this to happen as soon as the player dies

388
00:17:35,438 --> 00:17:38,180
because we won't get to see the PlayerDeath animation

389
00:17:38,180 --> 00:17:40,769
or the enemies changing to Idle or anything like that.

390
00:17:41,493 --> 00:17:45,298
So you can zoom in the animation view.

391
00:17:45,691 --> 00:17:47,691
Use that if this next part proves difficult

392
00:17:47,691 --> 00:17:49,102
you can use the scroll wheel,

393
00:17:49,102 --> 00:17:51,454
if you're on a Mac you can use the 2 finger zoom.

394
00:17:51,454 --> 00:17:53,454
But what I'm going to do

395
00:17:53,454 --> 00:17:56,668
is to drag a box over all of my keyframes.

396
00:17:59,134 --> 00:18:01,992
Then drag all of them so that

397
00:18:01,992 --> 00:18:03,992
the first keyframe is on

398
00:18:03,992 --> 00:18:07,788
1 second 30 frames, or 90 frames in total.

399
00:18:08,399 --> 00:18:10,399
So move it like that, that way it's going to stop playing,

400
00:18:10,399 --> 00:18:12,851
you'll see the other animations in the game

401
00:18:12,851 --> 00:18:15,321
and then this GameOver sequence is going to pop in.

402
00:18:16,241 --> 00:18:18,445
And finally disable record mode.

403
00:18:18,445 --> 00:18:21,107
So switch off that record button.

404
00:18:23,208 --> 00:18:26,940
Like I said, animation clips will loop.

405
00:18:27,453 --> 00:18:30,762
So the default in Unity is for looping animation.

406
00:18:30,762 --> 00:18:33,029
With something like this you don't want it to loop.

407
00:18:33,029 --> 00:18:35,029
And the way that you address that is a

408
00:18:35,029 --> 00:18:37,422
little bit hidden away, it's not ideal

409
00:18:37,422 --> 00:18:39,506
but it's attached to the clip.

410
00:18:39,506 --> 00:18:41,506
We don't want this to loop so what I'd like

411
00:18:41,506 --> 00:18:44,362
you to do is to go to the Animation folder

412
00:18:44,362 --> 00:18:46,362
in the Assets.

413
00:18:50,318 --> 00:18:53,189
And select the GameOverClip that we just made.

414
00:18:53,189 --> 00:18:54,704
So that clip that we just made,

415
00:18:54,704 --> 00:18:57,083
the default at the top there is Loop Time.

416
00:18:57,083 --> 00:18:59,681
Uncheck Loop Time at the top

417
00:18:59,681 --> 00:19:01,169
of the inspector.

418
00:19:03,276 --> 00:19:05,628
Then reselect the HUD Canvas

419
00:19:05,628 --> 00:19:07,628
and you'll notice that Unity has added

420
00:19:07,628 --> 00:19:10,056
like I mentioned before, the animator component

421
00:19:10,056 --> 00:19:13,311
and it's created a HUD Canvas

422
00:19:14,231 --> 00:19:15,902
Animator Controller.

423
00:19:16,379 --> 00:19:18,414
It names it after the game object

424
00:19:18,414 --> 00:19:20,953
that you started animating basically,

425
00:19:20,953 --> 00:19:22,334
that's why it's the same name.

426
00:19:22,334 --> 00:19:24,334
So I can double click that asset to open it

427
00:19:24,334 --> 00:19:26,524
in the animator window of the state machine.

428
00:19:27,487 --> 00:19:29,035
And that's exactly what we need to do.

429
00:19:29,035 --> 00:19:31,035
So double click HUD Canvas,

430
00:19:31,035 --> 00:19:34,415
the animator controller no the game object,

431
00:19:34,415 --> 00:19:36,268
to open it in the animator window.

432
00:19:36,268 --> 00:19:38,268
So by default it puts it in as a new state

433
00:19:38,268 --> 00:19:40,268
and it puts that clip in to that state

434
00:19:40,268 --> 00:19:43,537
as the default one to play and it's just going to loop it.

435
00:19:43,537 --> 00:19:46,584
We've stopped it looping by unchecking Loop Time

436
00:19:46,584 --> 00:19:49,054
but we also don't want it to play straight away.

437
00:19:49,504 --> 00:19:52,728
So we're going to right click

438
00:19:52,728 --> 00:19:55,088
Create State - Empty.

439
00:19:56,086 --> 00:19:57,931
So we'll have a new grey state.

440
00:19:57,931 --> 00:19:59,931
This state doesn't have any animation clips

441
00:19:59,931 --> 00:20:02,948
assigned to it so it effectively does nothing at all.

442
00:20:03,545 --> 00:20:04,961
Here's the problem that we're solving.

443
00:20:04,961 --> 00:20:06,316
As soon as I press play

444
00:20:08,338 --> 00:20:10,338
it's game over. You want people to have a bit more

445
00:20:10,338 --> 00:20:12,099
of a game-based experienced.

446
00:20:12,626 --> 00:20:15,432
So what we'll do is to solve that

447
00:20:15,432 --> 00:20:17,263
by stopping this being played by the

448
00:20:17,263 --> 00:20:18,667
animator straight away.

449
00:20:19,340 --> 00:20:21,340
We've made a new empty state

450
00:20:21,340 --> 00:20:23,757
and we don't have any motion,

451
00:20:23,757 --> 00:20:25,757
so usually when you see a state it has

452
00:20:25,757 --> 00:20:27,757
an animation clip in the motion field.

453
00:20:27,757 --> 00:20:29,357
We don't want that there.

454
00:20:29,357 --> 00:20:31,273
If we really wanted to we could rename it 

455
00:20:31,273 --> 00:20:33,273
Empty but we don't need to at all.

456
00:20:33,814 --> 00:20:36,040
But we do want that to be the default

457
00:20:36,040 --> 00:20:38,040
so we're going to right click on our new state

458
00:20:38,040 --> 00:20:41,102
or our empty state, and choose Set As Default.

459
00:20:42,655 --> 00:20:45,132
Then we're going to create a transition

460
00:20:45,736 --> 00:20:48,632
Make Transition to GameOverClip State.

461
00:20:49,018 --> 00:20:51,270
And we're going to select that transition

462
00:20:51,270 --> 00:20:53,270
and you'll see that there's a condition called

463
00:20:53,270 --> 00:20:55,474
Exit Time, but we don't want that.

464
00:20:55,474 --> 00:20:57,474
We want to have an actual trigger

465
00:20:57,474 --> 00:20:58,716
to make this happen.

466
00:20:58,716 --> 00:21:00,716
In our parameters we're going to

467
00:21:00,716 --> 00:21:03,119
create a new trigger

468
00:21:04,416 --> 00:21:06,359
and we're going to name this

469
00:21:06,774 --> 00:21:08,265
parameter GameOver.

470
00:21:08,265 --> 00:21:09,535
Capital G and O.

471
00:21:09,535 --> 00:21:11,535
Remember are being addressed

472
00:21:11,535 --> 00:21:14,590
by a script so it's very important that you get

473
00:21:14,590 --> 00:21:17,796
that naming correct, capital G, capital O.

474
00:21:18,414 --> 00:21:21,568
We need to then set this condition

475
00:21:21,568 --> 00:21:24,454
so make sure the transition is highlighted in blue

476
00:21:24,454 --> 00:21:25,385
like this

477
00:21:26,609 --> 00:21:28,834
and set the condition to GameOver.

478
00:21:28,834 --> 00:21:31,124
So as soon as that trigger is called from a script

479
00:21:31,124 --> 00:21:33,124
it will fire us in to that state.

480
00:21:33,468 --> 00:21:35,216
Then finally

481
00:21:35,216 --> 00:21:37,441
we're going to select our HUD Canvas

482
00:21:37,441 --> 00:21:40,065
in the hierarchy and we're going

483
00:21:40,065 --> 00:21:43,448
go to the Scripts - Managers folder

484
00:21:43,448 --> 00:21:46,706
and we're going to drag and drop GameOverManager

485
00:21:46,706 --> 00:21:48,903
on to HUD Canvas .

486
00:21:48,903 --> 00:21:51,962
So in Scripts - Managers folder in the project find

487
00:21:51,962 --> 00:21:55,996
GameOverManager, drop it on to HUD Canvas.

488
00:21:55,996 --> 00:21:58,773
Then we're going to double click this to open it.

489
00:22:01,576 --> 00:22:03,576
As always we're going to start with our

490
00:22:03,576 --> 00:22:06,305
public variables a the top of the script.

491
00:22:07,092 --> 00:22:10,396
We first need a reference to the player's health

492
00:22:10,396 --> 00:22:12,396
obviously the game ends when the player

493
00:22:12,396 --> 00:22:14,453
has run out of health, we need to know when that is.

494
00:22:14,453 --> 00:22:16,960
Next we have a public float

495
00:22:16,960 --> 00:22:19,474
which is the restartDelay, so that's how long it's going

496
00:22:19,474 --> 00:22:21,474
to take once the player has died

497
00:22:21,474 --> 00:22:23,019
before we restart.

498
00:22:23,019 --> 00:22:25,349
Next we have our private variables,

499
00:22:25,349 --> 00:22:26,840
We're got an animator reference,

500
00:22:26,840 --> 00:22:28,643
obviously because we need to set the

501
00:22:28,643 --> 00:22:30,226
animator's trigger parameter.

502
00:22:30,844 --> 00:22:33,722
And a timer for that restartDelay.

503
00:22:34,544 --> 00:22:36,544
So in our awake function

504
00:22:36,544 --> 00:22:39,064
we're going to setup the reference as we have done before

505
00:22:39,064 --> 00:22:40,341
using getComponent.

506
00:22:40,341 --> 00:22:42,341
And then in update

507
00:22:42,341 --> 00:22:44,341
we're going to check if the player has

508
00:22:44,341 --> 00:22:46,341
run out of health, if he's got less than

509
00:22:46,341 --> 00:22:49,117
or equal to 0 health.

510
00:22:49,117 --> 00:22:51,185
So if he has he's dead.

511
00:22:51,185 --> 00:22:53,185
So we're going to set the animator trigger parameter

512
00:22:53,185 --> 00:22:54,866
to GameOver.

513
00:22:55,368 --> 00:22:58,329
We'll set that and it'll trigger that animation.

514
00:22:59,195 --> 00:23:01,426
We're then going to start the restart timer

515
00:23:01,426 --> 00:23:04,022
and we're going to start counting up that timer.

516
00:23:04,022 --> 00:23:06,905
Once that exceeds the restart delay,

517
00:23:07,443 --> 00:23:09,915
so when the restart timer is`

518
00:23:09,915 --> 00:23:13,546
increased enough that it is greater than 5 seconds then

519
00:23:13,540 --> 00:23:16,949
we're going to call application.loadLevel.

520
00:23:16,949 --> 00:23:18,949
So that's just going to reload

521
00:23:19,284 --> 00:23:22,728
the scene because we've parsed in the loaded level.

522
00:23:22,728 --> 00:23:24,728
So usually you can write in a string, you might

523
00:23:24,728 --> 00:23:27,118
say level 01

524
00:23:27,118 --> 00:23:28,583
if you add it to the build settings

525
00:23:28,583 --> 00:23:32,466
but if you're reloading the same scene you can use shortcuts

526
00:23:32,466 --> 00:23:35,638
called LoadedLevel which is the one that's there.

527
00:23:35,638 --> 00:23:38,233
It's a very simple script, just a way to

528
00:23:38,233 --> 00:23:40,233
count up to a particular point

529
00:23:40,233 --> 00:23:42,233
if you've run out of health whilst also

530
00:23:42,233 --> 00:23:44,156
triggering the animation of GameOver

531
00:23:44,156 --> 00:23:46,156
to appear on the screen.

532
00:23:46,156 --> 00:23:49,453
Going back to Unity, we are very finally

533
00:23:49,453 --> 00:23:51,453
going to select our HUD Canvas

534
00:23:51,453 --> 00:23:53,453
and you'll notice that the GameOver Manager

535
00:23:53,453 --> 00:23:55,873
needs to know about PlayerHealth.

536
00:23:55,873 --> 00:23:57,873
So we need to assign the player

537
00:23:57,873 --> 00:24:00,643
to that public property PlayerHealth.

538
00:24:00,643 --> 00:24:02,643
With my HUD Canvas selected I'm going to drag

539
00:24:02,643 --> 00:24:05,356
Player and drop it on to PlayerHealth

540
00:24:05,356 --> 00:24:07,356
so it's got a reference to that, it can find out

541
00:24:07,356 --> 00:24:10,703
our health and therefore when we have died.

542
00:24:10,703 --> 00:24:13,356
Select the background music

543
00:24:14,903 --> 00:24:16,576
and do Play On Awake.

544
00:24:16,576 --> 00:24:18,576
Finally save your scene,

545
00:24:18,576 --> 00:24:22,230
pat yourselves on the back and press play

546
00:24:22,230 --> 00:24:24,668
to shoot some zombie toys.

547
00:24:26,772 --> 00:24:28,772
It'll probably sound like this.

548
00:24:37,206 --> 00:24:39,206
I'm going to turn that down a bit.
